[TOC]

# 1、腾讯云配置cuda环境
博客：https://face2ai.com/CUDA-F-0-0-Tencent-GPU-Cloud/


# 2、unbuntu配置
## 2.1、 联想Y9000P的windows11安装unbuntu系统





## 2.2、unbuntu安装cuda
1. 安装博客：https://blog.csdn.net/Sihang_Xie/article/details/127347139
2. cuda下载源：https://link.csdn.net/?from_id=127347139&target=https%3A%2F%2Fdeveloper.nvidia.com%2Fcuda-toolkit-archive

```shell
wget https://developer.download.nvidia.com/compute/cuda/11.4.4/local_installers/cuda_11.4.4_470.82.01_linux.run
sudo sh cuda_11.4.4_470.82.01_linux.run

```

3. 安装成功提示：

```shell

yyds@yyds-Legion-Y9000P-IAH7H:~/workspace/software$ sudo sh cuda_11.4.4_470.82.01_linux.run
===========
= Summary =
===========

Driver:   Not Selected
Toolkit:  Installed in /usr/local/cuda-11.4/
Samples:  Installed in /home/yyds/, but missing recommended libraries

Please make sure that
 -   PATH includes /usr/local/cuda-11.4/bin
 -   LD_LIBRARY_PATH includes /usr/local/cuda-11.4/lib64, or, add /usr/local/cuda-11.4/lib64 to /etc/ld.so.conf and run ldconfig as root

To uninstall the CUDA Toolkit, run cuda-uninstaller in /usr/local/cuda-11.4/bin
***WARNING: Incomplete installation! This installation did not install the CUDA Driver. A driver of version at least 470.00 is required for CUDA 11.4 functionality to work.
To install the driver using this installer, run the following command, replacing <CudaInstaller> with the name of this run file:
    sudo <CudaInstaller>.run --silent --driver
```
因为之前手动安装cuda kernel所以会显示这样，命令行安装cuda的时候把kernel选项关闭安装
手动安装cuda kernel方法：
-  软件根新 -》附加驱动 -》有 535 和 470两个被选驱动，手动安装470可以正常查看cuda版本，535不行

4. 配置更新环境变量

配置环境变量
```
vi ~/.bashrc
export PATH=/usr/local/cuda-11.4/bin:$PATH
export LD_LIBRARY_PATH=/usr/local/cuda-11.4/lib64:$LD_LIBRARY_PATH
export CUDA_HOME=/usr/local/cuda-11.4
```
更新系统环境
```
source ~/.bashrc
sudo ldconfig
```

5. cuda / cudnn 版本
- cuda 版本
```shell
yyds@yyds-Legion-Y9000P-IAH7H:~/workspace/project/notes/cuda/docs$ nvidia-smi
Thu Oct 10 03:57:55 2024       
+-----------------------------------------------------------------------------+
| NVIDIA-SMI 470.256.02   Driver Version: 470.256.02   CUDA Version: 11.4     |
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|                               |                      |               MIG M. |
|===============================+======================+======================|
|   0  NVIDIA GeForce ...  Off  | 00000000:01:00.0 Off |                  N/A |
| N/A   41C    P0    17W /  N/A |     10MiB /  5946MiB |      0%      Default |
|                               |                      |                  N/A |
+-------------------------------+----------------------+----------------------+
                                                                               
+-----------------------------------------------------------------------------+
| Processes:                                                                  |
|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |
|        ID   ID                                                   Usage      |
|=============================================================================|
|    0   N/A  N/A      1583      G   /usr/lib/xorg/Xorg                  4MiB |
|    0   N/A  N/A      1996      G   /usr/lib/xorg/Xorg                  4MiB |
+-----------------------------------------------------------------------------+
```

- cudnn版本
```shell
yyds@yyds-Legion-Y9000P-IAH7H:~/workspace/project/notes/cuda/docs$ nvcc -V
nvcc: NVIDIA (R) Cuda compiler driver
Copyright (c) 2005-2021 NVIDIA Corporation
Built on Mon_Oct_11_21:27:02_PDT_2021
Cuda compilation tools, release 11.4, V11.4.152
Build cuda_11.4.r11.4/compiler.30521435_0
```
