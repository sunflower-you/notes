- [ ] docker里 复现 compile cpy检查严格问题 
model.py 和 另外一个py文件有问题，cpy之后的.so编译有问题，py没有问题
    1. 打docker镜像
    ```
    export COMMIT_TIME=$(git show -s --format=%ci $CI_COMMIT_SHA |awk '{print $1"-"$2}' |tr -cd [:digit:] )
    docker build --no-cache -t sparse_llm-20240807-$(arch):$COMMIT_TIME .
    # 194
    docker run -it --rm --shm-size 256g --net=host --publish-all --privileged --cap-add=ALL -v /dev:/dev -v /usr/src:/usr/src -v /lib/modules:/lib/modules -v /ssd3/dongbenyang:/home/moffett/workspace/llm_compile/data 7696af20c5db
    # 105
    docker run -it --rm --shm-size 256g --net=host --publish-all --privileged --cap-add=ALL  -v /dev:/dev -v /usr/src:/usr/src -v /lib/modules:/lib/modules  -v /mnt/moffett/workspace/ant/auto_compile:/home/moffett/workspace/llm_compile/data 36ce458d95a6
    docker exec -it beab78904e3e /bin/bash
    ```
    2. 镜像里测试编译，只编译两层
```
本地编译命令：
python sparse_compile/example/compile_llm_from_hf_v2.py -o debug/debug_ssd3/fake_bailing/241008_bailing10b_real_config_test -wo /ssd3/hehuizhang/llm/weight/bailing/bailing_10B/ -hfmn /ssd3/hehuizhang/llm/weight/bailing/bailing_10B/ -cm tp serving -cfg /home/hehuizhang/git_lab/moffett_software/debug/debug_ssd3/fake_bailing/241008_bailing10b_real_config_test/bailing10b_tp_serving.json
镜像编译命令：
# 1、194
python3 sparse_compile/example/compile_llm_from_hf_v2.py -o ../llm_compile/data/20241009_bailing_10B -wo ../llm_compile/data/weight/weight/bailing_10B/ -hfmn ../llm_compile/data/weight/weight/bailing_10B/  -cm tp serving 
# 2、105
python3 /home/moffett/workspace/llm_compile/data/compile_llm_from_hf_v2.py -o ../llm_compile/data/20241009_bailing_10B_layer2 -wo /home/moffett/workspace/llm_compile/data/bailing_10B/ -hfmn /home/moffett/workspace/llm_compile/data/bailing_10B/ -cm tp serving -cfg /home/moffett/workspace/llm_compile/data/bailing_10B/bailing10b_tp_serving.json


python3 sparse_compile/example/compile_llm_from_hf_v2.py -o ../llm_compile/data/20241009_bailing_10B_layer2 -wo /home/moffett/workspace/llm_compile/data/bailing_10B/ -hfmn /home/moffett/workspace/llm_compile/data/bailing_10B/ -cm tp serving -cfg /home/moffett/workspace/llm_compile/data/bailing_10B/bailing10b_tp_serving.json
```

复现问题：
```
2024-10-09 14:15:57,357 - sparsert.build.ModelDownLoader - INFO     - DownLoad Model File Done. (compile_llm_from_hf_v2.py:77)
<sparse_compile.gpt.transformer_config.TransformerConfig object at 0x7efc125a4100>
Traceback (most recent call last):
  File "/home/moffett/workspace/llm_compile/data/compile_llm_from_hf_v2.py", line 77, in <module>
    moffett_llm_engine.from_hf_pretrained(llm_load_config)
  File "sparse_compile/gpt/moffett_llm_engine.py", line 82, in sparse_compile.gpt.moffett_llm_engine.MoffettLLMEngine.from_hf_pretrained
  File "sparse_compile/gpt/moffett_llm_engine.py", line 435, in sparse_compile.gpt.moffett_llm_engine.MoffettLLMEngine.get_default_model
  File "sparse_compile/gpt/bailing10b_modeling/model.py", line 194, in model.GLMForConditionalGeneration.__init__
  File "sparse_compile/gpt/bailing10b_modeling/model.py", line 179, in model.Bailing10BForCausalLM.__init__
  File "sparse_compile/gpt/bailing10b_modeling/model.py", line 155, in model.Bailing10BModel.__init__
  File "sparse_compile/gpt/bailing10b_modeling/model.py", line 140, in model.Bailing10BDecoderLayer.__init__
  File "sparse_compile/gpt/general_llm_tools/serving_tools.py", line 38, in general_llm_tools.serving_tools.ServingDecorator.__call__.ServingWrapped.__init__
  File "sparse_compile/gpt/bailing10b_modeling/model.py", line 22, in model.Bailing10BAttention.__init__
TypeError: super(type, obj): obj must be an instance or subtype of type
```





- [ ] qwen_7b性能优化：

```
python sparse_compile/example/compile_llm_from_hf_v2.py -o /
home/dongbenyang/workspace/moffett_software/debug/debug6/case/20241009_sparse_llm_qwen_7B_case_mlp_split_performance  -wo /ssd4/dongbenyang/Qwen2-7B/model/maple77/hub/maple77/Qwen2-7B -hfmn /ssd4/dongbenyang/Qwen2-7B/model/maple77/hub/maple77/Qwen2-7B -cm tp serving -cfg /home/dongbenyang/workspace/git_lab/moffett_software/debug/llama3_8b_sparsert_llm_performance_config.json
```


- [ ] qwen2.5_7b
```
python sparse_compile/example/compile_llm_from_hf_v2.py -o /home/dongbenyang/workspace/moffett_software/debug/debug6/case/20241009_sparse_llm_qwen2.5_7B_deliver  -wo /ssd4/dongbenyang/Qwen2.5-7B -hfmn Qwen/Qwen2.5-7B-Instruct -cm tp serving -cfg /home/dongbenyang/workspace/git_lab/moffett_software/debug/qwen2.5_7b_sparsert_llm_performance_config.json
```














- [ ] 学习计划 
    - [ ] cuda
        - [ ] cuda编程
        博客：https://face2ai.com/program-blog/#GPU%E7%BC%96%E7%A8%8B%EF%BC%88CUDA%EF%BC%89
        - [ ] cuda写op 熟练

    - [ ] llm

    - [ ] vllm